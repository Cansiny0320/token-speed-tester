# Repository Guidelines

## Project Structure & Module Organization

- `src/`: TypeScript source for the CLI. Entry point is `src/index.ts` with supporting modules like `client.ts`, `metrics.ts`, and `html-report.ts`.
- `tests/`: Vitest unit tests. Test files follow `*.test.ts` (for example, `tests/metrics.test.ts`).
- `docs/`: Images and documentation assets (for example, `docs/images/`).
- `dist/`: Build output (generated by `npm run build`).
- `scripts/`: Project scripts and automation helpers.

## Build, Test, and Development Commands

- `npm run dev -- --api-key sk-xxx`: Run the CLI directly with `tsx` during development.
- `npm run build`: Bundle with `tsup` and run `tsc --noEmit` for type checking.
- `npm run typecheck`: Type-check only.
- `npm run lint` / `npm run lint:fix`: ESLint checks and autofix.
- `npm run format` / `npm run format:check`: Prettier formatting and verification.
- `npm test`: Run Vitest once. Use `npm run test:watch`, `npm run test:ui`, or `npm run test:coverage` as needed.

## Coding Style & Naming Conventions

- TypeScript, ES modules (`"type": "module"`).
- Indentation: 2 spaces (follow Prettier defaults).
- Filenames: lower-case with dashes for docs, standard TypeScript names in `src/`.
- Tests: colocated in `tests/` with `*.test.ts` naming.
- User-facing strings go through i18n utilities (`src/i18n.ts`).

## Testing Guidelines

- Framework: Vitest with `@vitest/coverage-v8`.
- Coverage: keep coverage high (project targets ~99% statements and ~95% branches).
- Add or update tests for any CLI behavior changes or metrics logic updates.

## Commit & Pull Request Guidelines

- Commits: use Conventional Commits (examples: `feat:`, `fix:`, `docs:`) to align with semantic-release.
- PRs: include a clear description, link relevant issues, note test commands run, and update README/docs when CLI flags or output change.

## Configuration & Release Notes

- Node.js: `>=18` (see `package.json`).
- Releases are automated with semantic-release; avoid manual version bumps.
